<!doctype html>
<html class="no-js" lang="en" data-content_root="">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="genindex.html" /><link rel="search" title="Search" href="search.html" /><link rel="next" title="Usage" href="usage.html" /><link rel="prev" title="Wiring and assembly" href="wiring.html" />

    <!-- Generated with Sphinx 7.1.2 and Furo 2024.05.06 -->
        <title>Deployment and setup - dooropenerpico documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo.css?v=387cc868" />
    <link rel="stylesheet" type="text/css" href="_static/graphviz.css?v=eafc0fe6" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo-extensions.css?v=36a5483c" />
    <link rel="stylesheet" type="text/css" href="_static/css/custom.css?v=f238db65" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" /
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="index.html"><div class="brand">dooropenerpico  documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo" src="_static/chicken.svg" alt="Logo"/>
  </div>
  
  <span class="sidebar-brand-text">dooropenerpico  documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="index.html">Project overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="video.html">Video and images</a></li>
<li class="toctree-l1"><a class="reference internal" href="skills.html">Required skills</a></li>
<li class="toctree-l1"><a class="reference internal" href="software.html">Software requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="bom.html">Bill of materials</a></li>
<li class="toctree-l1"><a class="reference internal" href="printing.html">Printing the models</a></li>
<li class="toctree-l1"><a class="reference internal" href="wiring.html">Wiring and assembly</a></li>
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">Deployment and setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage.html">Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="troubleshooting.html">Troubleshooting and known issues</a></li>
<li class="toctree-l1"><a class="reference internal" href="development.html">Development</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="api.html">API documentation</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of API documentation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="class_structure.html">Class structure overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="generated/dooropenerpico.conf.Conf.html">Conf</a></li>
<li class="toctree-l2"><a class="reference internal" href="generated/dooropenerpico.dooropenerpico.DoorOpenerPico.html">DoorOpenerPico</a></li>
<li class="toctree-l2"><a class="reference internal" href="generated/dooropenerpico.dooropenerpicobase.DoorOpenerPicoBase.html">DoorOpenerPicoBase</a></li>
<li class="toctree-l2"><a class="reference internal" href="generated/dooropenerpico.dooropenerpiconetwork.DoorOpenerPicoNetwork.html">DoorOpenerPicoNetwork</a></li>
<li class="toctree-l2"><a class="reference internal" href="generated/dooropenerpico.dooropenerpicoweb.DoorOpenerPicoWeb.html">DoorOpenerPicoWeb</a></li>
<li class="toctree-l2"><a class="reference internal" href="generated/dooropenerpico.print_debug.Print_debug.html">Print_debug</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="licencing.html">Licencing and acknowledgements</a></li>
<li class="toctree-l1"><a class="reference internal" href="contacts.html">Contacts</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="_sources/deployment.rst.txt" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div>
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="deployment-and-setup">
<h1>Deployment and setup<a class="headerlink" href="#deployment-and-setup" title="Permalink to this heading">¶</a></h1>
<section id="cloning-the-repository">
<h2>Cloning the repository<a class="headerlink" href="#cloning-the-repository" title="Permalink to this heading">¶</a></h2>
<p>Initially, clone the repository using Git —</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>clone<span class="w"> </span>https://www.github.com/dwhweb/dooropenerpico.git
</pre></div>
</div>
</section>
<section id="creating-mqtt-credentials">
<h2>Creating MQTT credentials<a class="headerlink" href="#creating-mqtt-credentials" title="Permalink to this heading">¶</a></h2>
<p>Assuming you plan on using the Home Assistant/MQTT broker functionality you’ll need to create new user login credentials for the Pi Pico to use. You can find this option on Home Assistant in Settings → People → Users (Add user button) i.e.</p>
<a class="reference external image-reference" href="_images/homeassistant_1.png"><img alt="Home Assistant users dialog" src="_images/homeassistant_1.png" /></a>
<p>Once you’ve done that, you might want to verify that you can connect to the broker using MQTT explorer.</p>
</section>
<section id="deploying-code-to-the-pi-pico">
<h2>Deploying code to the Pi Pico<a class="headerlink" href="#deploying-code-to-the-pi-pico" title="Permalink to this heading">¶</a></h2>
<p>Before you can copy the code across, you’ll need to copy the MicroPython firmware to the Pico, follow the instructions on the <a class="reference external" href="https://www.raspberrypi.com/documentation/microcontrollers/micropython.html">Raspberry Pi website.</a></p>
<section id="deploying-via-script">
<h3>Deploying via script<a class="headerlink" href="#deploying-via-script" title="Permalink to this heading">¶</a></h3>
<p>Once you have the MicroPython firmware installed, assuming you’re running a *nix variant you can deploy the code to the Pi Pico using <code class="docutils literal notranslate"><span class="pre">deploy.sh</span></code> (you need <code class="docutils literal notranslate"><span class="pre">rshell</span></code> for this to run, see the <a class="reference internal" href="software.html"><span class="doc">software requirements</span></a> section).</p>
<p>The script will inform you that the current contents of the Pi Pico will be erased, and ask if you want to set up networking. Assuming this is the case, you will be prompted for —</p>
<ul class="simple">
<li><p>Wifi SSID</p></li>
<li><p>Wifi password</p></li>
<li><p>MQTT broker hostname/IP</p></li>
<li><p>MQTT port</p></li>
<li><p>MQTT username</p></li>
<li><p>MQTT password</p></li>
</ul>
<p>Otherwise, the credentials file will be deleted and the Pico will operate via button press only (no networking) on boot.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The deployment script takes a little time to copy files across to the Pi Pico and provides little visual feedback while doing so, please be patient!</p>
</div>
</section>
<section id="deploying-manually">
<span id="id1"></span><h3>Deploying manually<a class="headerlink" href="#deploying-manually" title="Permalink to this heading">¶</a></h3>
<p>If you’re running Windows (or just don’t want to run the script) and want to deploy the code to the Pi Pico manually, you need to copy <code class="docutils literal notranslate"><span class="pre">main.py</span></code> and the <code class="docutils literal notranslate"><span class="pre">lib/</span></code> directory across. You can do so using Thonny. With the Pi Pico connected, navigate to the directory where you cloned the code repository, then right click on the file/directory and select “Upload to /” i.e.</p>
<a class="reference external image-reference" href="_images/thonny_1.png"><img alt="Copying files to the Pi Pico" src="_images/thonny_1.png" /></a>
<p>You can alternatively use <code class="docutils literal notranslate"><span class="pre">rshell</span></code> to copy the files with —</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cp<span class="w"> </span>main.py<span class="w"> </span>/pyboard/main.py
cp<span class="w"> </span>-r<span class="w"> </span>lib/<span class="w"> </span>/pyboard/
</pre></div>
</div>
<p>Once you’ve done that, you’ll need to edit the credentials file <code class="docutils literal notranslate"><span class="pre">/lib/dooropenerpico/credentials.conf</span></code> to add Wifi/MQTT credentials as detailed above, or alternatively just delete the file if you don’t plan to use network functionality.</p>
</section>
</section>
<section id="configuration-options">
<span id="id2"></span><h2>Configuration options<a class="headerlink" href="#configuration-options" title="Permalink to this heading">¶</a></h2>
<p>There are a number of configuration options held within <code class="docutils literal notranslate"><span class="pre">/lib/dooropenerpico/config.conf</span></code> that you might want to change, these are —</p>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Key</p></th>
<th class="head"><p>Notes</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">pulse_time</span></code></p></td>
<td><p>The length of time the LEDs should pulse to indicate activity, in seconds.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">led_brightness</span></code></p></td>
<td><p>Brightness of the LEDs when on, value is a float between 0-1.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">timeout</span></code></p></td>
<td><p>The time in seconds after which the door opener aborts an open/close if the door doesn’t detect it is in the opposite state, this is a safety feature. The web server provides a feature to time how long actuation takes which is useful in working out an appropriate value, see the <a class="reference internal" href="usage.html#time-open-close"><span class="std std-ref">usage section</span></a>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">cushion_open_time</span></code></p></td>
<td><p>Time after which the door changes speed when opening in seconds, the intention being that you could set the door to open more slowly for the last portion so it opens gently and does not slam. If you don’t want this functionality, you can just set <code class="docutils literal notranslate"><span class="pre">cushion_open_speed</span></code> to be the same value as <code class="docutils literal notranslate"><span class="pre">open_speed</span></code>. This must be less than <code class="docutils literal notranslate"><span class="pre">timeout</span></code>, otherwise the door opener will not start.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">cushion_close_time</span></code></p></td>
<td><p>As above, but for the door closing as opposed to opening.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">open_speed</span></code></p></td>
<td><p>The speed at which the door should open between 0 (full speed anti-clockwise) and 1 (full speed clockwise).</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">close_speed</span></code></p></td>
<td><p>As above, but for closing.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">cushion_open_speed</span></code></p></td>
<td><p>The speed at which the door should open for the last (cushion) portion between 0 (full speed anti-clockwise) and 1 (full speed clockwise).</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">cushion_close_speed</span></code></p></td>
<td><p>As above, but for closing.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">left_reed_bounce_time</span></code></p></td>
<td><p>Prevents activation of the left reed switch being detected as multiple events, value is in seconds.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">right_reed_bounce_time</span></code></p></td>
<td><p>As above, but for the right reed switch.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ping_interval</span></code></p></td>
<td><p>Interval at which the Pi Pico should attempt to ping the MQTT broker, required to detect connection issues and re-establish connection automatically. If you encounter frequent connection issues it might be worth looking into getting an additional wireless access point or mesh setup.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">left_speed</span></code></p></td>
<td><p>Speed at which the servo moves when the user presses the “left” button in the web ui, this is a float value between 0 and 1.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">right_speed</span></code></p></td>
<td><p>As above, but for the “right” button.</p></td>
</tr>
</tbody>
</table>
</div>
<p>You’re most likely to need to tune the <code class="docutils literal notranslate"><span class="pre">timeout</span></code> and cushion times/speeds as it is likely that your coop is a different size than mine and hence the door will take a different amount of time to open or close.</p>
<p>You’ll likely need to tune <code class="docutils literal notranslate"><span class="pre">left_speed</span></code> and <code class="docutils literal notranslate"><span class="pre">right_speed</span></code> as well, even when using the same servo. There is a trim pot recessed into the side of the servo that you can set with a small phillips head screwdriver, this should be adjusted such that the servo doesn’t move when stopped (you can send a stop signal from the web ui, see the <a class="reference internal" href="usage.html#web-server"><span class="std std-ref">usage section</span></a>).</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Be careful when editing this file as it is validated on boot and if any key is missing or does not have an associated value the Pico won’t start.</p>
</div>
</section>
<section id="setting-up-home-assistant">
<h2>Setting up Home Assistant<a class="headerlink" href="#setting-up-home-assistant" title="Permalink to this heading">¶</a></h2>
<p>I’m assuming at this point you have the Pico configured such that it successfully connects to both your Wifi and the Home Assistant MQTT broker, you can refer to the <a class="reference internal" href="usage.html#console-output"><span class="std std-ref">usage section</span></a> to see what the console output looks like in Thonny.</p>
<p>Configuration in Home Assistant at this point should be relatively straightforward and the Pico should show in the list of entities (Settings → Devices &amp; Services → Entities) —</p>
<a class="reference external image-reference" href="_images/homeassistant_2.png"><img alt="The door opener entity" src="_images/homeassistant_2.png" /></a>
<p>You can then add the door opener to the dashboard (Overview → Edit dashboard (pencil) icon → Add card → By entity) —</p>
<a class="reference external image-reference" href="_images/homeassistant_3.png"><img alt="Adding the door opener to the dashboard" src="_images/homeassistant_3.png" /></a>
<p>You could then create an automation, for example, to open the door automatically at sunrise (Settings → Automations &amp; scenes → Create automation) —</p>
<a class="reference external image-reference" href="_images/homeassistant_4.png"><img alt="Door opener automation" src="_images/homeassistant_4.png" /></a>
<p>I don’t personally automate closing the door, as the time at which my chickens decide to go in varies and I don’t want them to accidentally get trapped in the door.</p>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="usage.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Usage</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="wiring.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Wiring and assembly</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2024 CC-BY-4.0, dwhweb
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Deployment and setup</a><ul>
<li><a class="reference internal" href="#cloning-the-repository">Cloning the repository</a></li>
<li><a class="reference internal" href="#creating-mqtt-credentials">Creating MQTT credentials</a></li>
<li><a class="reference internal" href="#deploying-code-to-the-pi-pico">Deploying code to the Pi Pico</a><ul>
<li><a class="reference internal" href="#deploying-via-script">Deploying via script</a></li>
<li><a class="reference internal" href="#deploying-manually">Deploying manually</a></li>
</ul>
</li>
<li><a class="reference internal" href="#configuration-options">Configuration options</a></li>
<li><a class="reference internal" href="#setting-up-home-assistant">Setting up Home Assistant</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="./" id="documentation_options" src="_static/documentation_options.js?v=b3ba4146"></script>
    <script src="_static/doctools.js?v=888ff710"></script>
    <script src="_static/sphinx_highlight.js?v=4825356b"></script>
    <script src="_static/scripts/furo.js?v=4e2eecee"></script>
    </body>
</html>